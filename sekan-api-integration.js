var crypto = require("crypto-js");

function getSignatureKey(key, dateStamp, regionName, serviceName) {
    var kDate = crypto.HmacSHA256(dateStamp, "AWS4" + key);
    var kRegion = crypto.HmacSHA256(regionName, kDate);
    var kService = crypto.HmacSHA256(serviceName, kRegion);
    var kSigning = crypto.HmacSHA256("aws4_request", kService);
    return kSigning;
}

console.log(getSignatureKey('eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.B9QGG3PDS_5AhTrXlVB0BSBYVa_ebrInkfw5kgYXgXkYPXKzzkdkUri-K7Ebe_QLXAbxyQvwL_wLP06F00dcI9M5ktceO_lF57j8v6sdNE-VAJdCbz3AyALvbSnosFW-6QvDemZT4V_R0mh8U-Nm1_N5A3w6g53ZOLYeLSGeG927dzkbALW2xUPVpdRH9gGa2nx-RlWGn8167f-MtQfiaK3lQK0SvD3GK9sCXslV6yLwDlu0Kw26Fw7n-lOjxiEqcGLexpkNj_XTKZdvlm76q19y_jeztTWmvkVyj0Oy11NRSryo0lJDTDfgCDzXqdSUckqwsPtuy5f1BxIJZGVolA.x-OtjMPysz0A-GVy.XXHlXwoZm4fZUCho_F6t09i0EGcWMQMNVGo-tTORJzWDtaX_dBbTg-vE8c0-9oT7UZx1sMqDpNwjz-YtRQc1xl6zWjceFI7zsuEdMoKDitAYYCetjooBnvQr9yzyLpO8_vx5_hJbTOomGQcQBksEIh9vWOFwUDv47KuC8u20YRkuNhpI6EMVg-vZOINFw8zsGksLgjyZLV823-xho4MRFXAlDrFJcPkPqNIORbcJn9F5pBnaNEe3-5mcacEIKi2BRXdPelJvzxElCamwVas2HeMzrGhsty5volr6G1SwU3zfiT3BaGy_9gl0K8h_dCCHq_urZfyH_6qMBXxKqbna7MVGxZuqRWZ702HsKQs9df-6Mml4zpnQKkWVVDS5GfJxzXJflOMzF-2DvMvWXNz19wNEj54RHqV-njH2cFNJ6bsmkzLVZSvkXenuEWB-wmoGwYYt7vLSv8lrk7XJxXByJhCktwUVz4XpfnC4nJVlaU9WSY7VcI1Kgf63VUxpV2Z1iP23iGaw83HMAF-7D8ckFI6-LPS0ToXOXHpMnxwxQEm7Ti0nQX0VV7EbZ82Zdr0EYVmM7NNEa35wn70UHIYuPxmdSo6mVn4XnuEPC1aVqD8d8dNZNy6kKesGCLGto47mg-NXD-Fzip_UCwMoVrInNpebFGX6yVWcjhbHr8ZYAqoE9dXJq5FmtHgSKvPfs81Er2PBwbxMPsIW_j5xzRthkixzm5xUPFzVfvFwmsgZ6ifrIqawEqEdsz56BmhhEFwf1FC1DgSEp4IpfqMf9eRUfN-EwSJC8X3w6iKTIghYfkvVXmSOgxt-2-941MpwN4oxMhG7iXTwwgRmI579RRsI9Z8a2RjDeU6KX3ZUIT0fwVPi4s4JdOxcVilqOxrR603HCwj_rXkyrxl9GzEsApolZ6pqAuLAiOXhIixbOC6Z6alB65YFuvIlWUZOP-BOdDL9eLQYsmgyvCrrCP8TkwoiBityPtqMNErpa7WLCXUZEsOz_yCNrKiFOKZ6DQR6toTtzuaFCBtTNOWT47_-J_rUu1BXfvTNmVuMQiHub1tUKE3wg622ejGBXSt9j4WTODA9ddlpaBW6RCt2D8bdbxQTHWnnyOeSLWuGq4Ie-xtE4Q98QFIMquIUUvFqF9DlbS9OR4UP9RjpCgLKMyd-_-M0QnUz8GAH6_CIQXGfZCO3Xv7y_gd-Xn85gTSbWPnbJvO5SaLIyXf9Sdwi_QMY3c_on_wfR-e2Zmlv750vxUMhtRC0A8lQ9ee8MDTF_FdPoHQQ_huOre4kUHYV2mMacul70-DgBYDnmaamZ6ekwCJFbvPrroIfwF_Cz5LqlSFpK9Rm9EM7gZo.PEic48iQIymqfRh9Hh6Frw', '20120215', 'us-east-1', 'iam'))